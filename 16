//1 
#include <stdio.h> 
#include <stdlib.h> 
#include <omp.h> 
 
int main() { 
    int n = 2000; 
    double **matrix, *vector, *result; 
    int i, j; 
 
    matrix = (double **)malloc(n * sizeof(double *)); 
    for (i = 0; i < n; i++) { 
        matrix[i] = (double *)malloc(n * sizeof(double)); 
    } 
    vector = (double *)malloc(n * sizeof(double)); 
    result = (double *)malloc(n * sizeof(double)); 
 
    for (i = 0; i < n; i++) { 
        vector[i] = 1.0; 
        for (j = 0; j < n; j++) { 
            matrix[i][j] = 1.0; 
        } 
    } 
 
    double start = omp_get_wtime(); 
    for (i = 0; i < n; i++) { 
        double sum = 0.0; 
        for (j = 0; j < n; j++) { 
            sum += matrix[i][j] * vector[j]; 
        } 
        result[i] = sum; 
    } 
    double end = omp_get_wtime(); 
    printf("Sequential Time: %f seconds\n", end - start); 
 
    start = omp_get_wtime(); 
    #pragma omp parallel for private(j) schedule(static) 
    for (i = 0; i < n; i++) { 
        double sum = 0.0; 
        for (j = 0; j < n; j++) { 
            sum += matrix[i][j] * vector[j]; 
        } 
        result[i] = sum; 
    } 
    end = omp_get_wtime(); 
    printf("Parallel Time: %f seconds\n", end - start); 
 
for (i = 0; i < n; i++) { 
free(matrix[i]); 
} 
free(matrix); 
free(vector); 
free(result); 
return 0; 
} 
//2 
#include <stdio.h> 
#include <omp.h> 
int main() { 
int clothing[] = {500, 1000, 750}; 
int gaming[] = {1500, 2000}; 
int grocery[] = {100, 250, 300, 150}; 
int stationary[] = {50, 80, 40}; 
int n1 = 3, n2 = 2, n3 = 4, n4 = 3; 
int total_seq = 0, total_par = 0; 
double start, end, seq_time, par_time; 
start = omp_get_wtime(); 
for (int i = 0; i < n1; i++) { 
total_seq += clothing[i]; 
} 
for (int i = 0; i < n2; i++) { 
total_seq += gaming[i]; 
} 
for (int i = 0; i < n3; i++) { 
total_seq += grocery[i]; 
} 
for (int i = 0; i < n4; i++) { 
total_seq += stationary[i]; 
} 
end = omp_get_wtime(); 
seq_time = end - start; 
start = omp_get_wtime(); 
#pragma omp parallel sections reduction(+:total_par) 
{ 
#pragma omp section 
for (int i = 0; i < n1; i++) { 
total_par += clothing[i]; 
} 
#pragma omp section 
for (int i = 0; i < n2; i++) { 
total_par += gaming[i]; 
} 
#pragma omp section 
for (int i = 0; i < n3; i++) { 
total_par += grocery[i]; 
} 
#pragma omp section 
for (int i = 0; i < n4; i++) { 
total_par += stationary[i]; 
} 
} 
end = omp_get_wtime(); 
par_time = end - start; 
printf("Sequential Total: %d, Time: %lf sec\n", total_seq, seq_time); 
printf("Parallel Total: %d, Time: %lf sec\n", total_par, par_time); 
printf("Speedup: %lf\n", seq_time / par_time); 
return 0; 
} 
//3 
#include <stdio.h> 
#include <omp.h> 
int main() { 
long long num_steps = 10000000000; 
double step, x, sum = 0.0; 
double start_time, end_time; 
step = 1.0 / (double) num_steps; 
start_time = omp_get_wtime(); 
#pragma omp parallel for private(x) reduction(+:sum) 
for (long long i = 0; i < num_steps; i++) { 
x = (i + 0.5) * step; 
sum += 4.0 / (1.0 + x * x); 
} 
double pi = step * sum; 
end_time = omp_get_wtime(); 
printf("Approximated Pi = %.15f\n", pi); 
printf("Time taken = %f seconds\n", end_time - start_time); 
return 0; 
} 
//4 
#include <stdio.h> 
#include <stdlib.h> 
#include <time.h> 
#include <omp.h> 
int main() { 
int n, i; 
printf("Number of terms : "); 
scanf("%d", &n); 
int* a = (int*)malloc(n * sizeof(int)); 
a[0] = 0; 
a[1] = 1; 
clock_t st, et; 
st = clock(); 
omp_set_num_threads(2); 
#pragma omp parallel 
{ 
#pragma omp single 
{ 
printf("id of thread involved in the computation of fibonacci numbers = %d\n", 
omp_get_thread_num()); 
for (i = 2; i < n; i++) 
a[i] = a[i - 2] + a[i - 1]; 
} 
#pragma omp single 
{ 
printf("id of thread involved in the displaying of fibonacci numbers = %d\n", 
omp_get_thread_num()); 
printf("Fibonacci numbers: "); 
for (i = 0; i < n - 1; i++) 
printf("%d ", a[i]); 
printf("\n"); 
} 
} 
et = clock(); 
printf("Time Taken : %lfms\n", ((double)(et - st) * 1000 / CLOCKS_PER_SEC)); 
free(a); 
return 0; 
} 
//5 
#include <stdio.h> 
#include <omp.h> 
#include <stdlib.h> 
 
int main() { 
    int n, i; 
    printf("Enter n : "); 
    scanf("%d", &n); 
 
    float cgpa[n]; 
    float rtime, crictime; 
    double st, et; 
 
    #pragma omp parallel for 
    for (i = 0; i < n; i++) { 
        cgpa[i] = (rand() % 1000) / 100.0; 
        printf("%.2f\t", cgpa[i]); 
    } 
    printf("\n"); 
 
    float Max = cgpa[0]; 
    st = omp_get_wtime(); 
    #pragma omp parallel for 
    for (i = 1; i < n; i++) { 
        #pragma omp critical 
        { 
            if (cgpa[i] > Max) 
                Max = cgpa[i]; 
        } 
    } 
    et = omp_get_wtime(); 
    crictime = et - st; 
 
    Max = cgpa[0]; 
    st = omp_get_wtime(); 
    #pragma omp parallel for reduction(max : Max) 
    for (i = 1; i < n; i++) { 
        if (cgpa[i] > Max) Max = cgpa[i]; 
    } 
    et = omp_get_wtime(); 
    rtime = et - st; 
 
    printf("Maximum cgpa = %.2f\nReduction Time = %f sec\nCritical Time = %f sec\n", 
Max, rtime, crictime); 
 
    return 0; 
} 
 
//6 
#include <stdio.h> 
#include <stdlib.h> 
#include <omp.h> 
 
int main() { 
    int n, i, j, k; 
    printf("Enter the size of square matrix: "); 
    scanf("%d", &n); 
 
    int a[n][n], b[n][n], c[n][n]; 
 
    for (i = 0; i < n; i++) { 
        for (j = 0; j < n; j++) { 
            a[i][j] = rand() % 10; 
            b[i][j] = rand() % 10; 
            c[i][j] = 0; 
        } 
    } 
 
    double st = omp_get_wtime(); 
    for (i = 0; i < n; i++) { 
        for (j = 0; j < n; j++) { 
            c[i][j] = 0; 
            for (k = 0; k < n; k++) { 
                c[i][j] += a[i][k] * b[k][j]; 
            } 
        } 
    } 
    double et = omp_get_wtime(); 
    printf("Sequential time required for computation is: %lf \n", et - st); 
 
    st = omp_get_wtime(); 
    #pragma omp parallel for collapse(2) private(i,j,k) schedule(guided,3) 
    for (i = 0; i < n; i++) { 
        for (j = 0; j < n; j++) { 
            c[i][j] = 0; 
            for (k = 0; k < n; k++) { 
                c[i][j] += a[i][k] * b[k][j]; 
            } 
        } 
    } 
    et = omp_get_wtime(); 
    printf("Parallel time required for computation is: %lf \n", et - st); 
 
return 0; 
} 


run cmd
gedit f.c
gcc -fopenmp f.c
./a.out
